<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kalkulator IP</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fa;
  color: #222;
  padding: 20px;
}

.container {
  max-width: 700px;
  background: #ffffff;
  margin: auto;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.input-row {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

input, select, button {
  padding: 8px;
  font-size: 14px;
  background: #ffffff;
  color: #222;
  border: 1px solid #ccc;
  border-radius: 4px;
}

input::placeholder {
  color: #888;
}

button {
  cursor: pointer;
  background: #4a90e2;
  color: white;
  border: none;
}

button:hover {
  background: #357abd;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}

th {
  background: #f0f2f5;
}

.remove-btn {
  background: #e74c3c;
  color: white;
  border: none;
  padding: 4px 6px;
  cursor: pointer;
  border-radius: 4px;
}

.remove-btn:hover {
  background: #c0392b;
}

.results {
  margin-top: 15px;
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
  <h2>Kalkulator IP</h2>

  <div class="input-row">
    <input id="courseName" placeholder="Mata Kuliah">
    <input id="credits" type="number" placeholder="SKS" min="0.1" step="0.1">
    <select id="grade">
      <option>A</option>
      <option>AB</option>
      <option>B</option>
      <option>BC</option>
      <option>C</option>
      <option>D</option>
      <option>E</option>
    </select>
    <button onclick="addCourse()">Tambah Mata Kuliah</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>Mata Kuliah</th>
        <th>SKS</th>
        <th>Nilai</th>
        <th></th>
      </tr>
    </thead>
    <tbody id="courseTable"></tbody>
  </table>

  <div class="results">
    <div id="totalCredits">Total SKS: 0</div>
    <div id="gpa">IP: --</div>
  </div>
</div>

<script>
var GRADE_VALUES = {A:4, AB:3.5, B:3, BC:2.5, C:2, D:1, E:0};
var GRADE_OPTIONS = ["A","AB","B","BC","C","D","E"];
var courses = [];

function addCourse() {
  var name = document.getElementById("courseName").value.trim();
  var credits = parseFloat(document.getElementById("credits").value);
  var grade = document.getElementById("grade").value;

  if (!name) {
    alert("Nama mata kuliah tidak boleh kosong.");
    return;
  }

  if (isNaN(credits) || credits <= 0) {
    alert("SKS harus berupa angka dan lebih dari 0.");
    return;
  }

  courses.push({name:name, credits:credits, grade:grade});
  document.getElementById("courseName").value = "";
  document.getElementById("credits").value = "";
  render();
}

function removeCourse(index) {
  courses.splice(index, 1);
  render();
}

function updateGrade(index, newGrade) {
  courses[index].grade = newGrade;
  renderResults();
}

function render() {
  var table = document.getElementById("courseTable");
  table.innerHTML = "";

  for (var i = 0; i < courses.length; i++) {
    var c = courses[i];
    var row = document.createElement("tr");

    var gradeSelect = "<select onchange='updateGrade(" + i + ", this.value)'>";
    for (var g = 0; g < GRADE_OPTIONS.length; g++) {
      var selected = GRADE_OPTIONS[g] === c.grade ? "selected" : "";
      gradeSelect += "<option " + selected + ">" + GRADE_OPTIONS[g] + "</option>";
    }
    gradeSelect += "</select>";

    row.innerHTML =
      "<td>" + c.name + "</td>" +
      "<td>" + c.credits + "</td>" +
      "<td>" + gradeSelect + "</td>" +
      "<td><button class='remove-btn' onclick='removeCourse(" + i + ")'>X</button></td>";

    table.appendChild(row);
  }

  renderResults();
}

function renderResults() {
  var totalCredits = 0;
  var totalWeighted = 0;

  for (var i = 0; i < courses.length; i++) {
    var c = courses[i];
    totalCredits += c.credits;
    totalWeighted += c.credits * GRADE_VALUES[c.grade];
  }

  document.getElementById("totalCredits").textContent =
    "Total SKS: " + totalCredits;

  document.getElementById("gpa").textContent =
    totalCredits === 0
      ? "IP: --"
      : "IP: " + (totalWeighted / totalCredits).toFixed(2);
}
</script>
</body>
</html>
